# ida-text-resizer
Lets you resize the .text section of a PE32+ executable using IDA.

Tested on IDA Pro 9.0

> [!Note]
> **Note**: 99% of this code has been generated by ChatGPT. I have left in the comments for readability.

> [!Warning]
> **Warning**: This patcher only supports patching simple memory or immediate accesses. Complex addressing modes, indirect jumps, and obfuscated instructions will not be patched.


## Usage
0. Install all requirements by running `pip install -r requirements.txt`
1. Open the executable you want to patch in IDA
2. Run the script `dumper.py`
3. Copy the outputted `txt` to the same directory as `patcher.py`
4. Run `patcher.py` on the executable. Make sure the executable has not changed from between dumping and patching.


```
usage: patcher.py [-h] -n COUNT [-b HEXBYTE] -o OUTPUT INPUT_PE TEXT_REFS

Patch a PE32+ executable by appending bytes into the .text section, shifting all later sections,
adjusting virtual addresses, and rebiasing all recorded displacements and immediates in the code. Primarily used to
make room for injected shellcode.

positional arguments:
  INPUT_PE            Path to original PE32+ executable
  TEXT_REFS           Path to reference file (output of dumper.py) containing instruction metadata

options:
  -h, --help          show this help message and exit
  -n, --pad COUNT     Number of padding bytes to append to the end of .text section
  -b, --byte HEXBYTE  Byte value to use for padding (default: 0x90 = NOP). Example: 0xCC for INT3
  -o, --out OUTPUT    Path to write patched binary
```

# How it works
uhh i was going to write something here, just look at the code and figure it out